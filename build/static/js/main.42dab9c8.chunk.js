(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{30:function(e,t,a){},34:function(e,t,a){e.exports=a(63)},39:function(e,t,a){},40:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(31),s=a.n(i),r=(a(39),a(5)),c=a(6),l=a(8),d=a(7),h=a(15),u=a(2),p=(a(40),a(14)),m=a(1),g=a(4),f={loginContainer:{width:"20%",marginTop:"15%",marginLeft:"auto",marginRight:"auto",paddingBottom:20,textAlign:"center"},cont:{margin:"10% 0 10% 0"},inputData:{background:"#f1ebdc",width:"100%",height:35,border:"none",borderRadius:5,fontSize:18,marginLeft:"auto",marginRight:"auto",marginBottom:10}},k=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={email:"",password:""},n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.handleChange=n.handleChange.bind(Object(m.a)(n)),n}return Object(c.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),g.post(this.props.hostName+"/auth/sign_in",{email:this.state.email,password:this.state.password},{withCredentials:!0}).then((function(e){var a=e.headers["access-token"],n=e.headers.client,o=e.headers.uid;localStorage.accessToken=a,localStorage.client=n,localStorage.uid=o,localStorage.isLogged="IS_LOGGED",t.props.history.push("/projects")})).catch((function(e){console.log("Request error ",e)}))}},{key:"handleChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return o.a.createElement("div",{style:f.loginContainer},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{style:f.inputData,type:"text",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange,required:!0}),o.a.createElement("input",{style:f.inputData,type:"text",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange,required:!0}),o.a.createElement("button",null,"\u0412\u043e\u0439\u0442\u0438"),o.a.createElement(h.b,{to:"/register"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))}}]),a}(o.a.Component),b=a(4),j=a.n(b),v={loginContainer:{width:"20%",marginTop:"15%",marginLeft:"auto",marginRight:"auto",paddingBottom:20,textAlign:"center"},cont:{margin:"10% 0 10% 0"},inputData:{background:"#f1ebdc",width:"100%",height:35,border:"none",borderRadius:5,fontSize:18,marginLeft:"auto",marginRight:"auto",marginBottom:10}},y=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={email:"",password:"",password_confirmation:""},e.handleSubmit=e.handleSubmit.bind(Object(m.a)(e)),e.handleChange=e.handleChange.bind(Object(m.a)(e)),e}return Object(c.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.hostName+"auth";j.a.post(a,{email:this.state.email,password:this.state.password,password_confirmation:this.state.password_confirmation},{withCredentials:!0}).then((function(e){var a=e.headers["access-token"],n=e.headers.client,o=e.headers.uid;localStorage.accessToken=a,localStorage.client=n,localStorage.uid=o,localStorage.isLogged="IS_LOGGED",t.props.history.push("/projects")})).catch((function(e){console.log("Request error ",e)}))}},{key:"handleChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return o.a.createElement("div",{style:v.loginContainer},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",name:"email",style:v.inputData,placeholder:"Email",value:this.state.email,onChange:this.handleChange,required:!0}),o.a.createElement("input",{type:"text",name:"password",style:v.inputData,placeholder:"Password",value:this.state.password,onChange:this.handleChange,required:!0}),o.a.createElement("input",{type:"text",name:"password_confirmation",style:v.inputData,placeholder:"Confirm password",value:this.state.password_confirmation,onChange:this.handleChange,required:!0}),o.a.createElement("button",null,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),o.a.createElement(h.b,{to:"/"},"\u0412\u0445\u043e\u0434")))}}]),a}(o.a.Component),w={addProjectContainer:{width:"100%"}},N=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={projectName:""},n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.handleChange=n.handleChange.bind(Object(m.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),j.a.post("http://localhost:3001/api/v1/projects",{data:{attributes:{name:this.state.projectName}}},{headers:{"access-token":localStorage.accessToken,client:localStorage.client,uid:localStorage.uid}},{withCredentials:!0}).then((function(e){t.props.addNewProject(e.data),t.setState({projectName:""})})).catch((function(e){console.log("Request error ",e)}))}},{key:"render",value:function(){return o.a.createElement(n.Fragment,null,o.a.createElement("div",{style:w.addProjectContainer,id:"project_name",method:"POST",hidden:this.props.isHidden},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{id:"new_project_name",className:"inputData",value:this.state.projectName,onChange:this.handleChange,type:"text",name:"projectName"}),o.a.createElement("button",{id:"new_project",className:"addNewProject"},"Add"))))}}]),a}(o.a.Component),E=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("input",{style:{bg:"#ff0000"},onChange:this.props.changeTaskName,className:this.props.className,type:"text",value:this.props.name,readOnly:this.props.readOnly})}}]),a}(o.a.Component),O=(a(30),{t:{color:"#999999",borderBottom:"1px solid #eaedec"},t1:{width:"10%",borderRight:"5px double #f0dedd"},t2:{width:"70%",textAlign:"left",paddingLeft:"5%"},t3:{width:"20%",borderLeft:"1px solid #eaedec"},navigation:{width:"25%",float:"left"},row:{background:"#ffffff",width:"100%",height:50},rowDone:{background:"#c2f7b7",width:"100%",height:50},upImage:{marginTop:"3%"},downImage:{}}),S=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={taskName:n.props.task.name,readOnlyName:!0,taskDone:n.props.task.done},n.handleTaskDelete=n.handleTaskDelete.bind(Object(m.a)(n)),n.handleEditName=n.handleEditName.bind(Object(m.a)(n)),n.changeTaskName=n.changeTaskName.bind(Object(m.a)(n)),n.taskChecked=n.taskChecked.bind(Object(m.a)(n)),n.taskUp=n.taskUp.bind(Object(m.a)(n)),n.taskDown=n.taskDown.bind(Object(m.a)(n)),n.changeTaskPosition=n.changeTaskPosition.bind(Object(m.a)(n)),n}return Object(c.a)(a,[{key:"handleTaskDelete",value:function(e){var t=this;j.a.delete(this.props.hostName+"api/v1/projects/"+this.props.projectId+"/tasks/"+this.props.task.id,{headers:{"access-token":localStorage.accessToken,client:localStorage.client,uid:localStorage.uid}},{withCredentials:!0}).then((function(e){t.props.updatePage()})).catch((function(e){console.log("Request error ",e)}))}},{key:"handleEditName",value:function(e){this.setState({readOnlyName:!this.state.readOnlyName}),this.state.readOnlyName||j.a.patch(this.props.hostName+"api/v1/projects/"+this.props.projectId+"/tasks/"+this.props.task.id,{data:{attributes:{name:this.state.taskName}}},{headers:{"access-token":localStorage.accessToken,client:localStorage.client,uid:localStorage.uid}},{withCredentials:!0}).then((function(e){})).catch((function(e){console.log("Request error ",e)}))}},{key:"changeTaskName",value:function(e){this.setState({taskName:e.target.value})}},{key:"taskChecked",value:function(e){this.setState({taskDone:!this.state.taskDone}),j.a.patch(this.props.hostName+"api/v1/projects/"+this.props.projectId+"/tasks/"+this.props.task.id+"/complete",{},{headers:{"access-token":localStorage.accessToken,client:localStorage.client,uid:localStorage.uid}},{withCredentials:!0}).then((function(e){})).catch((function(e){console.log("Request error ",e)}))}},{key:"changeTaskPosition",value:function(e){var t=this;console.log("=> ",e),j.a.patch(this.props.hostName+"api/v1/projects/"+this.props.projectId+"/tasks/"+this.props.task.id+"/position",{data:{attributes:{position:e}}},{headers:{"access-token":localStorage.accessToken,client:localStorage.client,uid:localStorage.uid}},{withCredentials:!0}).then((function(e){t.props.updatePage()})).catch((function(e){console.log("Request error ",e)}))}},{key:"taskUp",value:function(e){var t=this.props.task.position-1;t<1||this.changeTaskPosition(t)}},{key:"taskDown",value:function(e){var t=this.props.task.position+1;this.changeTaskPosition(t)}},{key:"render",value:function(){var e=this.state.taskDone?"taskNameFieldDone":"taskNameField",t=this.state.taskDone?"rowDone":"row";return o.a.createElement(n.Fragment,null,o.a.createElement("tr",{className:t},o.a.createElement("th",{style:O.t1},o.a.createElement("input",{type:"checkbox",onClick:this.taskChecked,className:"checkbox",defaultChecked:this.props.task.done,name:this.props.task.name})),o.a.createElement("th",{style:O.t2},o.a.createElement(E,{className:e,name:this.state.taskName,changeTaskName:this.changeTaskName,readOnly:this.state.readOnlyName})),o.a.createElement("th",{style:O.t3},o.a.createElement("div",{style:O.navigation},o.a.createElement("div",{style:O.upImage,onClick:this.taskUp,name:this.props.task.id},o.a.createElement("i",{className:"fas fa-sort-up"})),o.a.createElement("div",{className:"downImage",onClick:this.taskDown,name:this.props.task.id},o.a.createElement("i",{className:"fas fa-sort-down"})," ")),o.a.createElement("div",{style:O.navigation},o.a.createElement("i",{className:"fas fa-pencil-alt",onClick:this.handleEditName})),o.a.createElement("div",{style:O.navigation,onClick:this.handleTaskDelete},o.a.createElement("i",{className:"fas fa-trash-alt"})))))}}]),a}(o.a.Component),C={contTbl:{margin:"10% 0 10% 0"},up:{background:"linear-gradient(#4e7dba, #3b639f)",color:"#ffffff",width:"100%",height:45,fontSize:24,fontFamily:"arial"},projectName:{background:"linear-gradient(#4a78b5, #426daa)",color:"#ffffff",width:"87%",float:"left",fontSize:20,marginTop:7,border:"none"},progectAction:{marginRight:17,marginTop:5,paddingTop:7,textAlign:"right"},editProjectBtn:{marginRight:15,marginTop:12},delProjectBtn:{},createLine:{background:"linear-gradient(#e0e0e0, #cccccc)",width:"100%",height:45},plus:{width:"4%",float:"left"},fieldContainer:{width:"96%",height:"80%",float:"left",marginTop:5},field:{background:"#ffffff",width:"84%",height:32,fontSize:"120%",display:"inline-block",border:"none",outline:"none",float:"left"},butt:{width:"15%",height:43,float:"left"},btn:{width:"100%",height:34,background:"linear-gradient(#8ac0a3, #4b8061)",border:"none",fontFamily:"arial",color:"#ffffff",fontSize:"100%"},tbl:{}},T=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={project:[],readOnlyProject:!0,projectName:n.props.project.name,newTaskName:""},n.handleDelete=n.handleDelete.bind(Object(m.a)(n)),n.handelNameEdit=n.handelNameEdit.bind(Object(m.a)(n)),n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.updatePage=n.updatePage.bind(Object(m.a)(n)),n.addTask=n.addTask.bind(Object(m.a)(n)),n}return Object(c.a)(a,[{key:"handleDelete",value:function(e){this.props.handleDelete(this.props.project.id)}},{key:"handelNameEdit",value:function(e){this.setState({readOnlyProject:!this.state.readOnlyProject}),this.state.readOnlyProject||j.a.patch(this.props.hostName+"api/v1/projects/"+this.props.project.id,{data:{attributes:{name:this.state.projectName}}},{headers:{"access-token":localStorage.accessToken,client:localStorage.client,uid:localStorage.uid}},{withCredentials:!0}).then((function(e){})).catch((function(e){console.log("Request error ",e)}))}},{key:"handleChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"updatePage",value:function(e){this.props.updatePage()}},{key:"addTask",value:function(e){var t=this;j.a.post(this.props.hostName+"api/v1/projects/"+this.props.project.id+"/tasks",{data:{attributes:{name:this.state.newTaskName}}},{headers:{"access-token":localStorage.accessToken,client:localStorage.client,uid:localStorage.uid}},{withCredentials:!0}).then((function(e){t.setState({newTaskName:""}),t.updatePage()})).catch((function(e){console.log("Request error ",e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:C.contTbl,id:"project-{{project.id}}"},o.a.createElement("div",{style:C.up,name:"a"},o.a.createElement("input",{style:C.projectName,type:"text",name:"projectName",onChange:this.handleChange,value:this.state.projectName,readOnly:this.state.readOnlyProject}),o.a.createElement("div",{style:C.progectAction,name:"b"},o.a.createElement("div",{className:"navigation"},o.a.createElement("i",{className:"fas fa-pencil-alt",onClick:this.handelNameEdit})),o.a.createElement("div",{className:"navigation"},o.a.createElement("i",{className:"fas fa-trash-alt",onClick:this.handleDelete})))),o.a.createElement("div",{style:C.createLine},o.a.createElement("div",{style:C.plus},o.a.createElement("p",null,"+")),o.a.createElement("div",{style:C.fieldContainer},o.a.createElement("input",{style:C.field,type:"text",onChange:this.handleChange,name:"newTaskName",value:this.state.newTaskName,id:"newTaskName{{project.id}}",placeholder:"Start typing here to create a task..."}),o.a.createElement("div",{style:C.butt},o.a.createElement("input",{style:C.btn,type:"submit",onClick:this.addTask,value:"Add Task",name:"{{project.id}}"})))),o.a.createElement("div",{style:C.tbl},o.a.createElement("table",{id:"table{this.props.project.id}"},o.a.createElement("tbody",null,this.props.tasks.map((function(t){return o.a.createElement(S,{task:t,key:"task-"+t.id,updatePage:e.updatePage,hostName:e.props.hostName,projectId:e.props.project.id,handleDelete:e.deleteTask})}))))))}}]),a}(o.a.Component),P={mainTasksContainer:{width:"60%",marginLeft:"20%"},addProjectContainer:{width:"100%"},cont:{background:"#ff0000",width:100,height:50,margin:"10% 0 10% 0"},addNewProject:{}},D=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={projects:[],projectFormHiddem:!0,hostName:"https://maks-api-todo.herokuapp.com/"},n.handleLogout=n.handleLogout.bind(Object(m.a)(n)),n.showTodoForm=n.showTodoForm.bind(Object(m.a)(n)),n.addNewProject=n.addNewProject.bind(Object(m.a)(n)),n.deleteProject=n.deleteProject.bind(Object(m.a)(n)),n.getProjects=n.getProjects.bind(Object(m.a)(n)),n.updatePage=n.updatePage.bind(Object(m.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getProjects()}},{key:"getProjects",value:function(){var e=this,t=this.state.hostName+"api/v1/projects";j.a.get(t,{headers:{"access-token":localStorage.accessToken,client:localStorage.client,uid:localStorage.uid}},{withCredentials:!0}).then((function(t){e.setState({projects:t.data})})).catch((function(e){console.log("Request error ",e)}))}},{key:"handleLogout",value:function(e){var t=this;e.preventDefault(),j.a.delete(this.state.hostName+"auth/sign_out",{headers:{"access-token":localStorage.accessToken,client:localStorage.client,uid:localStorage.uid}},{withCredentials:!0}).then((function(e){localStorage.isLogged="",localStorage.accessToken="",localStorage.client="",localStorage.uid="",t.props.history.push("/")})).catch((function(e){console.log("Request error ",e)}))}},{key:"showTodoForm",value:function(e){e.preventDefault(),this.setState({projectFormHiddem:!this.state.projectFormHiddem})}},{key:"addNewProject",value:function(e){var t=this.state.projects;t.push(e),this.setState({projects:t,projectFormHiddem:!this.state.projectFormHiddem})}},{key:"deleteProject",value:function(e){var t=this;j.a.delete(this.state.hostName+"api/v1/projects/"+e,{headers:{"access-token":localStorage.accessToken,client:localStorage.client,uid:localStorage.uid}},{withCredentials:!0}).then((function(e){t.getProjects()})).catch((function(e){console.log("Request error ",e)}))}},{key:"updatePage",value:function(e){this.getProjects()}},{key:"render",value:function(){var e=this;return o.a.createElement(n.Fragment,null,o.a.createElement("div",{id:"mainTasksContainer",style:P.mainTasksContainer},this.state.projects.map((function(t){return o.a.createElement(T,{project:t,updatePage:e.updatePage,tasks:t.tasks,hostName:e.state.hostName,key:"project-"+t.id,handleDelete:e.deleteProject})}))),o.a.createElement("div",{className:"addContainer"},o.a.createElement("div",{id:"add_button"},o.a.createElement("p",null,o.a.createElement("input",{onClick:this.showTodoForm,style:P.addNewProject,type:"submit",value:"+ Add TODO list",id:"add_project"})),o.a.createElement(N,{addNewProject:this.addNewProject,isHidden:this.state.projectFormHiddem}))),o.a.createElement("input",{id:"logout",onClick:this.handleLogout,type:"submit",value:"Logout"}))}}]),a}(o.a.Component),x=a(33),R=function(e){var t=e.component,a=Object(x.a)(e,["component"]);return o.a.createElement(u.b,Object.assign({},a,{render:function(e){return localStorage.isLogged?o.a.createElement(t,e):o.a.createElement(u.a,{to:{pathname:"/",state:{from:e.location}}})}}))},L=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={hostName:"https://maks-api-todo.herokuapp.com/"},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(h.a,null,o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/",render:function(t){return o.a.createElement(k,Object.assign({},t,{hostName:e.state.hostName}))}}),o.a.createElement(u.b,{exact:!0,path:"/register",render:function(t){return o.a.createElement(y,Object.assign({},t,{hostName:e.state.hostName}))}}),o.a.createElement(R,{exact:!0,path:"/projects",component:D}))))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.42dab9c8.chunk.js.map